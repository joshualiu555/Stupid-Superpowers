{"ast":null,"code":"var _jsxFileName = \"/Users/joshualiu/Desktop/test/client/src/components/Chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport ScrollToBottom, { useScrollToBottom, useSticky } from \"react-scroll-to-bottom\";\nimport initReactFastclick from \"react-fastclick\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ninitReactFastclick();\n\nconst filter = require(\"leo-profanity\");\n\nfunction Chat(_ref) {\n  _s();\n\n  let {\n    socket,\n    code,\n    color,\n    name\n  } = _ref;\n  const scrollToBottom = useScrollToBottom();\n  const [sticky] = useSticky();\n  const [currentMessage, setCurrentMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]);\n  useEffect(() => {\n    socket.on(\"receiveMessage\", data => {\n      setMessageList(list => [...list, data]);\n    });\n  }, []);\n\n  const sendMessage = () => {\n    if (currentMessage !== \"\") {\n      let cleanCurrentMessage = currentMessage;\n\n      if (color === \"green\" && filter.check(cleanCurrentMessage)) {\n        cleanCurrentMessage = filter.clean(cleanCurrentMessage);\n      }\n\n      const messageData = {\n        code: code,\n        name: name,\n        message: cleanCurrentMessage\n      };\n      setCurrentMessage(\"\");\n      socket.emit(\"sendMessage\", messageData);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ChatBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"MessageBox\",\n      children: /*#__PURE__*/_jsxDEV(ScrollToBottom, {\n        className: \"MessageList\",\n        children: [messageList.map((messageContent, index) => {\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [messageContent.name, \": \", messageContent.message]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 33\n          }, this);\n        }), !sticky && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: scrollToBottom,\n          children: \"Click me to scroll to bottom\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"YourMessage\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: currentMessage,\n        placeholder: \"Type your message\",\n        onChange: event => {\n          setCurrentMessage(event.target.value);\n        },\n        onKeyPress: event => {\n          event.key === \"Enter\" && sendMessage();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        children: \"Enter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chat, \"imIY+XNtQD/NBCErgAccu1ZrwNA=\", false, function () {\n  return [useScrollToBottom, useSticky];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","ScrollToBottom","useScrollToBottom","useSticky","initReactFastclick","filter","require","Chat","socket","code","color","name","scrollToBottom","sticky","currentMessage","setCurrentMessage","messageList","setMessageList","on","data","list","sendMessage","cleanCurrentMessage","check","clean","messageData","message","emit","map","messageContent","index","event","target","value","key"],"sources":["/Users/joshualiu/Desktop/test/client/src/components/Chat.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport ScrollToBottom, {useScrollToBottom, useSticky} from \"react-scroll-to-bottom\"\nimport initReactFastclick from \"react-fastclick\"\ninitReactFastclick();\nconst filter = require(\"leo-profanity\")\n\nfunction Chat({socket, code, color, name}) {\n    const scrollToBottom = useScrollToBottom();\n    const [sticky] = useSticky();\n    const [currentMessage, setCurrentMessage] = useState(\"\")\n    const [messageList, setMessageList] = useState([])\n\n    useEffect(() => {\n        socket.on(\"receiveMessage\", (data) => {\n            setMessageList(list => [...list, data])\n        })\n    }, [])\n\n    const sendMessage = () => {\n        if (currentMessage !== \"\") {\n            let cleanCurrentMessage = currentMessage\n            if (color === \"green\" && filter.check(cleanCurrentMessage)) {\n                cleanCurrentMessage = filter.clean(cleanCurrentMessage)\n            }\n            const messageData = {\n                code: code,\n                name: name,\n                message: cleanCurrentMessage,\n            }\n            setCurrentMessage(\"\")\n            socket.emit(\"sendMessage\", messageData)\n        }\n    }\n\n    return (\n        <div className=\"ChatBox\">\n                <div className=\"MessageBox\">\n                    <ScrollToBottom className={\"MessageList\"}>\n                        {messageList.map((messageContent, index) => {\n                            return (\n                                <p key={index}>{messageContent.name}: {messageContent.message}</p>\n                            )\n                        })}\n                        {!sticky && <button onClick={scrollToBottom}>Click me to scroll to bottom</button>}\n                    </ScrollToBottom>\n                </div>\n            <div className=\"YourMessage\">\n                <input\n                    value={currentMessage}\n                    placeholder=\"Type your message\"\n                    onChange={event => {setCurrentMessage(event.target.value)}}\n                    onKeyPress={(event) => {\n                        event.key === \"Enter\" && sendMessage();\n                    }}\n                />\n                <button onClick={sendMessage}>Enter</button>\n            </div>\n        </div>\n    )\n}\n\nexport default Chat\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,cAAP,IAAwBC,iBAAxB,EAA2CC,SAA3C,QAA2D,wBAA3D;AACA,OAAOC,kBAAP,MAA+B,iBAA/B;;AACAA,kBAAkB;;AAClB,MAAMC,MAAM,GAAGC,OAAO,CAAC,eAAD,CAAtB;;AAEA,SAASC,IAAT,OAA2C;EAAA;;EAAA,IAA7B;IAACC,MAAD;IAASC,IAAT;IAAeC,KAAf;IAAsBC;EAAtB,CAA6B;EACvC,MAAMC,cAAc,GAAGV,iBAAiB,EAAxC;EACA,MAAM,CAACW,MAAD,IAAWV,SAAS,EAA1B;EACA,MAAM,CAACW,cAAD,EAAiBC,iBAAjB,IAAsChB,QAAQ,CAAC,EAAD,CAApD;EACA,MAAM,CAACiB,WAAD,EAAcC,cAAd,IAAgClB,QAAQ,CAAC,EAAD,CAA9C;EAEAC,SAAS,CAAC,MAAM;IACZQ,MAAM,CAACU,EAAP,CAAU,gBAAV,EAA6BC,IAAD,IAAU;MAClCF,cAAc,CAACG,IAAI,IAAI,CAAC,GAAGA,IAAJ,EAAUD,IAAV,CAAT,CAAd;IACH,CAFD;EAGH,CAJQ,EAIN,EAJM,CAAT;;EAMA,MAAME,WAAW,GAAG,MAAM;IACtB,IAAIP,cAAc,KAAK,EAAvB,EAA2B;MACvB,IAAIQ,mBAAmB,GAAGR,cAA1B;;MACA,IAAIJ,KAAK,KAAK,OAAV,IAAqBL,MAAM,CAACkB,KAAP,CAAaD,mBAAb,CAAzB,EAA4D;QACxDA,mBAAmB,GAAGjB,MAAM,CAACmB,KAAP,CAAaF,mBAAb,CAAtB;MACH;;MACD,MAAMG,WAAW,GAAG;QAChBhB,IAAI,EAAEA,IADU;QAEhBE,IAAI,EAAEA,IAFU;QAGhBe,OAAO,EAAEJ;MAHO,CAApB;MAKAP,iBAAiB,CAAC,EAAD,CAAjB;MACAP,MAAM,CAACmB,IAAP,CAAY,aAAZ,EAA2BF,WAA3B;IACH;EACJ,CAdD;;EAgBA,oBACI;IAAK,SAAS,EAAC,SAAf;IAAA,wBACQ;MAAK,SAAS,EAAC,YAAf;MAAA,uBACI,QAAC,cAAD;QAAgB,SAAS,EAAE,aAA3B;QAAA,WACKT,WAAW,CAACY,GAAZ,CAAgB,CAACC,cAAD,EAAiBC,KAAjB,KAA2B;UACxC,oBACI;YAAA,WAAgBD,cAAc,CAAClB,IAA/B,QAAuCkB,cAAc,CAACH,OAAtD;UAAA,GAAQI,KAAR;YAAA;YAAA;YAAA;UAAA,QADJ;QAGH,CAJA,CADL,EAMK,CAACjB,MAAD,iBAAW;UAAQ,OAAO,EAAED,cAAjB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QANhB;MAAA;QAAA;QAAA;QAAA;MAAA;IADJ;MAAA;MAAA;MAAA;IAAA,QADR,eAWI;MAAK,SAAS,EAAC,aAAf;MAAA,wBACI;QACI,KAAK,EAAEE,cADX;QAEI,WAAW,EAAC,mBAFhB;QAGI,QAAQ,EAAEiB,KAAK,IAAI;UAAChB,iBAAiB,CAACgB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAjB;QAAsC,CAH9D;QAII,UAAU,EAAGF,KAAD,IAAW;UACnBA,KAAK,CAACG,GAAN,KAAc,OAAd,IAAyBb,WAAW,EAApC;QACH;MANL;QAAA;QAAA;QAAA;MAAA,QADJ,eASI;QAAQ,OAAO,EAAEA,WAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QATJ;IAAA;MAAA;MAAA;MAAA;IAAA,QAXJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAyBH;;GArDQd,I;UACkBL,iB,EACNC,S;;;KAFZI,I;AAuDT,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}